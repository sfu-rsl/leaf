with_shared_dep